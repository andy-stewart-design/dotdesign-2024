<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content="Astro v4.2.7" />
    <title>Andy Stewart | Product Design + Creative Technology</title>
    <style>
      nav[data-astro-cid-ju4v47fh] {
        gap: 16px;
        display: flex;
      }
      @layer reset {
        *,
        :before,
        :after {
          box-sizing: border-box;
        }
        html {
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          -moz-text-size-adjust: none;
          text-size-adjust: none;
        }
        body,
        h1,
        h2,
        h3,
        h4,
        p,
        figure,
        blockquote,
        pre,
        dl,
        dd,
        ul,
        ol {
          margin: 0;
        }
        ul[role="list"],
        ol[role="list"] {
          list-style: none;
        }
        body {
          min-height: 100lvh;
          font-family:
            system-ui,
            -apple-system,
            BlinkMacSystemFont,
            Segoe UI,
            Roboto,
            Noto Sans,
            Ubuntu,
            Cantarell,
            Helvetica Neue,
            sans-serif;
          line-height: 1.5;
        }
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        button,
        input,
        label {
          line-height: 1.1;
        }
        h1,
        h2,
        h3,
        h4 {
          text-wrap: balance;
        }
        a:not([class]) {
          text-decoration-skip-ink: auto;
          color: currentColor;
        }
        img,
        picture {
          max-width: 100%;
          display: block;
        }
        input,
        button,
        textarea,
        select {
          font: inherit;
        }
        textarea:not([rows]) {
          min-height: 10em;
        }
      }
      @layer system {
        :where(html) {
          --background: #1a1a1a;
          --foreground: #efefef;
        }
        :where(html) {
          --font-sans: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu,
            Cantarell, Noto Sans, sans-serif;
          --font-serif: ui-serif, serif;
          --font-mono: Dank Mono, Operator Mono, Inconsolata, Fira Mono,
            ui-monospace, SF Mono, Monaco, Droid Sans Mono, Source Code Pro,
            monospace;
          --font-light: 300;
          --font-regular: 400;
          --font-medium: 500;
          --font-semibold: 600;
          --font-bold: 700;
          --font-extrabold: 800;
          --font-black: 900;
          --font-xs: 0.5rem;
          --font-sm: 0.75rem;
          --font-base: 1rem;
          --font-lg: 1.1rem;
          --font-xl: 1.25rem;
          --font-2xl: 1.5rem;
          --font-3xl: 2rem;
          --font-4xl: 2.5rem;
          --font-5xl: 3rem;
          --font-6xl: 3.5rem;
          --leading-xs: 0.95;
          --leading-sm: 1.1;
          --leading-md: 1.25;
          --leading-lg: 1.375;
          --leading-xl: 1.5;
          --letterspacing-0: -0.05em;
          --letterspacing-1: 0.025em;
          --letterspacing-2: 0.05em;
          --letterspacing-3: 0.075em;
          --letterspacing-4: 0.15em;
          --letterspacing-5: 0.5em;
          --letterspacing-6: 0.75em;
          --letterspacing-7: 1em;
        }
      }
      @layer utility;
      @layer theme {
        :where(html) {
          background: var(--background);
          color: var(--foreground);
        }
        h1 {
          font-size: var(--font-4xl);
        }
        h2 {
          font-size: var(--font-3xl);
        }
        h3 {
          font-size: var(--font-2xl);
        }
        @media (min-width: 640.001px) {
          h1 {
            font-size: var(--font-6xl);
          }
          h2 {
            font-size: var(--font-3xl);
          }
          h3 {
            font-size: var(--font-2xl);
          }
        }
        .prose {
          gap: 1.25em;
          max-width: 64ch;
          font-size: 1rem;
          display: grid;
        }
        .prose h1 {
          font-size: var(--font-4xl);
        }
        .prose h2 {
          font-size: var(--font-2xl);
        }
        .prose h3 {
          font-size: var(--font-lg);
        }
        .prose h2 {
          margin-block-start: 0.5em;
        }
        pre + :is(.prose h2) {
          margin-block-start: 0.25em;
        }
        .prose h3 {
          margin-block-start: 0.5em;
        }
        pre + :is(.prose h3) {
          margin-block-start: 0.25em;
        }
        .prose p {
          font-size: 1em;
        }
        .prose pre {
          font-size: var(--font-sm);
          margin-block-start: 0.5em;
          margin-block-end: 0.5em;
        }
        .prose pre code {
          padding: 16px;
          display: block;
        }
        .prose blockquote {
          font-size: var(--font-lg);
          font-weight: var(--font-semibold);
          line-height: var(--leading-lg);
          margin-block-start: 0.5em;
          margin-block-end: 0.5em;
          padding-inline-start: 1.5rem;
          position: relative;
        }
        .prose blockquote p {
          margin: 0;
        }
        .prose blockquote:after {
          content: "";
          border-inline-start: 1px solid #fff;
          position: absolute;
          top: 0.325em;
          bottom: 0.325em;
          left: 0;
        }
        @media (min-width: 640.001px) {
          .prose {
            font-size: 1.125rem;
          }
          .prose blockquote {
            font-size: var(--font-xl);
          }
          .prose pre {
            font-size: var(--font-base);
          }
        }
        :where(html) {
          --space-xs: 4px;
          --space-sm: 8px;
          --space-md: 16px;
          --space-lg: 24px;
          --space-xl: 32px;
          --px-app: var(--space-md);
        }
        @media (min-width: 640.001px) {
          :where(html) {
            --px-app: var(--space-xl);
          }
        }
        :where(html) .p-xs {
          padding: var(--space-xs);
        }
        :where(html) .p-sm {
          padding: var(--space-sm);
        }
        :where(html) .p-md {
          padding: var(--space-md);
        }
        :where(html) .p-lg {
          padding: var(--space-lg);
        }
        :where(html) .p-xl {
          padding: var(--space-xl);
        }
        :where(html) .px-xs {
          padding-inline: var(--space-xs);
        }
        :where(html) .px-sm {
          padding-inline: var(--space-sm);
        }
        :where(html) .px-md {
          padding-inline: var(--space-md);
        }
        :where(html) .px-lg {
          padding-inline: var(--space-lg);
        }
        :where(html) .px-xl {
          padding-inline: var(--space-xl);
        }
        :where(html) .px-app {
          padding-inline: var(--px-app);
        }
        :where(html) .py-xs {
          padding-block: var(--space-xs);
        }
        :where(html) .py-sm {
          padding-block: var(--space-sm);
        }
        :where(html) .py-md {
          padding-block: var(--space-md);
        }
        :where(html) .py-lg {
          padding-block: var(--space-lg);
        }
        :where(html) .py-xl {
          padding-block: var(--space-xl);
        }
      }
      @layer component;
      header[data-astro-cid-egg7nqdx] {
        gap: 1.25em;
        display: grid;
      }
      header[data-astro-cid-egg7nqdx] h1[data-astro-cid-egg7nqdx] {
        font-size: var(--font-4xl);
      }
      @media (min-width: 640.001px) {
        header[data-astro-cid-egg7nqdx] h1[data-astro-cid-egg7nqdx] {
          font-size: var(--font-5xl);
        }
      }
    </style>
  </head>
  <body>
    <nav data-astro-cid-ju4v47fh>
      <a href="/" data-astro-cid-ju4v47fh>Home</a
      ><a href="/about" data-astro-cid-ju4v47fh>About</a
      ><a href="/posts" data-astro-cid-ju4v47fh>Posts</a>
    </nav>
    <article class="px-app py-lg" data-astro-cid-egg7nqdx>
      <header data-astro-cid-egg7nqdx>
        <h1 data-astro-cid-egg7nqdx>Animating with the Flip Plugin for GSAP</h1>
        <h4 data-astro-cid-egg7nqdx>June 30, 2022</h4>
      </header>
      <main class="prose" data-astro-cid-egg7nqdx>
        <h2 id="what-the-flip-is-it">What the flip is it?</h2>
        <p>
          Every time a new <a href="https://gsap.com/">GSAP</a> plugin is
          introduced, I‚Äôm close to bursting from excitement. The simplicity of
          the GreenSock API makes learning and applying these tools in projects
          such a dream. I had the pleasure of beta testing the
          <a href="https://gsap.com/scrolltrigger/">ScrollTrigger plugin</a> and
          was blown away by how easily I was able to dive in and start creating.
        </p>
        <p>
          The <a href="https://gsap.com/docs/v3/Plugins/Flip">Flip plugin</a> is
          no different. And how about this? As of the
          <a href="https://gsap.com/3-9/">3.9 release</a> (Dec 2021), it‚Äôs no
          longer a members-only plugin. T‚Äôwas a
          <a href="https://codepen.io/GreenSock/pen/NWadxaR">Merry Christmas</a>
          indeed!
        </p>
        <p>
          Before I continue, let‚Äôs take a moment to celebrate the amazing
          GreenSock team for the incredible animation tools they provide for our
          web community. üôè
        </p>
        <h2 id="the-technique">The technique</h2>
        <p>
          FLIP, coined by
          <a href="https://aerotwist.com/blog/flip-your-animations/"
            >Paul Lewis</a
          >, is an acronym for First, Last, Invert, and Play. The Flip plugin
          harnesses this technique so that web developers can effortlessly and
          smoothly transition elements between states. Take it straight from
          <a href="https://gsap.com/docs/v3/Plugins/Flip"
            >the plugin‚Äôs introduction</a
          >:
        </p>
        <blockquote>
          <p>
            Flip records the current position/size/rotation of your elements,
            then you make whatever changes you want, and then Flip applies
            offsets to make them LOOK like they never moved/resized/rotated and
            then animates the removal of those offsets! UI transitions become
            remarkably simple to code. Flip does all the heavy lifting.
          </p>
        </blockquote>
        <p>
          I recommend reading
          <a href="https://gsap.com/docs/v3/Plugins/Flip">the docs</a>
          (always!), and watching that intro tutorial video (or jump straight
          down to their code examples if that‚Äôs your fancy) to find out how you,
          too, can produce super sizzlin‚Äô layout animations with a minimal
          amount of code.
        </p>
        <h2 id="the-challenge">The challenge</h2>
        <p>
          The final week‚Äôs prompt for the
          <a href="https://codepen.io/challenges/2021/december/4"
            >December 2021 CodePen Challenge</a
          >
          involved using the FLIP technique. This couldn‚Äôt have lined up more
          perfectly. The holidays had arrived. The office was quiet. I filled my
          coffee mug to its very top and, after a few hours of learning and
          experimentation, came up with this animation prototype:
        </p>
        <p>
          In the above CodePen embed, click on a product item square and it will
          magically slingshot towards the cart button. Once the element reaches
          the end of its transition, it will be inserted into the cart alongside
          other selected products. Click on the cart button to pull its
          container into view with those selections. Inside this container,
          clicking items sends them back to their initial positions in the grid.
        </p>
        <p>
          Building this functionality without the Flip plugin would take quite a
          bit of time and strategy. GSAP just handles all of that critical code;
          the rest is left up to our wild imaginations!
        </p>
        <p>
          Let‚Äôs get into some of the key features that bring this animation to
          life.
        </p>
        <h2 id="how-it-works">How it works</h2>
        <p>
          The ‚ÄúUsage‚Äù section of the
          <a href="https://gsap.com/docs/v3/Plugins/Flip">Flip plugin docs</a>
          breaks this down into three steps that are followed to execute this
          add-to-cart animation:
        </p>
        <ol>
          <li>Get the current state</li>
          <li>Make your state changes</li>
          <li>Call <code>Flip.from(state, options)</code></li>
        </ol>
        <h3 id="step-1-capture-the-state">Step 1: Capture the state</h3>
        <p>
          When an item is selected, Flip‚Äôs <code>getState</code> method is
          called to collect data about the item‚Äôs current size, position,
          rotation, and skew. This gets stored in a variable before applying
          other DOM edits, style changes, and so on.
        </p>
        <pre
          class="astro-code github-dark"
          style="background-color: #24292e; color: #e1e4e8; overflow-x: auto"
          tabindex="0"
        ><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> state</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> Flip.</span><span style="color:#B392F0">getState</span><span style="color:#E1E4E8">(item);</span></span></code></pre>
        <p>
          The Flip plugin by default only records the following CSS properties:
          transforms (x, y, scaleX, scaleY, rotation, skewX), width, height, and
          opacity. However, it can be configured to affect others by adding a
          <code>props</code> property with a comma-delimited list of values in
          the <code>options</code> object. Learn more under the ‚ÄúUsage‚Äù section
          in <a href="https://gsap.com/docs/v3/Plugins/Flip">the docs</a>!
        </p>
        <h3 id="step-2-make-the-changes">Step 2: Make the changes</h3>
        <p>
          After capturing the initial state data, the item gets appended as a
          child of the cart button.
        </p>
        <pre
          class="astro-code github-dark"
          style="background-color: #24292e; color: #e1e4e8; overflow-x: auto"
          tabindex="0"
        ><code><span class="line"><span style="color:#E1E4E8">cartBtnWrapper.</span><span style="color:#B392F0">appendChild</span><span style="color:#E1E4E8">(item);</span></span></code></pre>
        <h3 id="step-3-flip-it">Step 3: FLIP it!</h3>
        <p>
          The selected item is ready to animate from its current grid position
          over to the cart button. Time for the Flip plugin to dazzle us all
          with its magic. ‚ú®
        </p>
        <pre
          class="astro-code github-dark"
          style="background-color: #24292e; color: #e1e4e8; overflow-x: auto"
          tabindex="0"
        ><code><span class="line"><span style="color:#E1E4E8">Flip.</span><span style="color:#B392F0">from</span><span style="color:#E1E4E8">(state, {</span></span>
<span class="line"><span style="color:#E1E4E8">  duration: reducedMotion </span><span style="color:#F97583">?</span><span style="color:#79B8FF"> 0</span><span style="color:#F97583"> :</span><span style="color:#79B8FF"> 0.5</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  ease: </span><span style="color:#9ECBFF">"back.in(0.8)"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
        <p>
          Flip checks out the stored <code>state</code> object, compares it to
          the item‚Äôs current state data, and immediately sets the position and
          size so that the item appears to still exist in its grid placement.
          Then the item transitions to its <em>actual</em> placement inside the
          button by animating the removal of these position and size offset
          values.
        </p>
        <p>
          I did nearly nothing here. This is all GSAP Flip sorcery. My goodness
          it‚Äôs good.
        </p>
        <p>
          You might be wondering about the <code>reducedMotion</code> variable;
          review its value in the full version of the JavaScript code (click the
          JS tab in the CodePen embed above). It detects if a user has requested
          less movement on screen. If true, the item will be instantly added to
          the cart instead of animating across the page. Learn more about
          <code>prefers-reduced-motion</code> in
          <a href="https://web.dev/prefers-reduced-motion/"
            >this web.dev article</a
          >.
        </p>
        <p>
          In order to get the item to move into the cart once the animation has
          finished, the <code>onComplete</code> callback is used to append the
          item as a child.
        </p>
        <pre
          class="astro-code github-dark"
          style="background-color: #24292e; color: #e1e4e8; overflow-x: auto"
          tabindex="0"
        ><code><span class="line"><span style="color:#E1E4E8">Flip.</span><span style="color:#B392F0">from</span><span style="color:#E1E4E8">(state, {</span></span>
<span class="line"><span style="color:#E1E4E8">  duration: reducedMotion </span><span style="color:#F97583">?</span><span style="color:#79B8FF"> 0</span><span style="color:#F97583"> :</span><span style="color:#79B8FF"> 0.5</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  ease: </span><span style="color:#9ECBFF">"back.in(0.8)"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#B392F0">  onComplete</span><span style="color:#E1E4E8">: () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    cartItems.</span><span style="color:#B392F0">appendChild</span><span style="color:#E1E4E8">(item);</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
        <p>
          After that, other animations are run such as sliding the item into
          place and the acrobatic front flip of the count badge. This project is
          <em>all</em> about the flips. Be sure to jump into the
          <a href="#codepen-demo">full JS code</a> for those implementation
          details.
        </p>
        <h2 id="wrapping-up">Wrapping up</h2>
        <p>
          This experiment seems like it only just begins to harness the
          superpower supplied by the GSAP Flip plugin. I‚Äôm looking forward to
          seeing how you all utilize this in projects. As always, with this
          great power comes a lot of responsibility. Consider folks that prefer
          reduced motion or how larger layout animations could affect the
          overall experience.
        </p>
        <p>
          Friendly feedback forever welcome. Share with me on
          <a href="https://fosstodon.org/@hexagoncircle">Mastodon</a>.
        </p>
        <h3 id="helpful-resources">Helpful resources</h3>
        <ul>
          <li>
            <a href="https://gsap.com/docs/v3/Plugins/Flip"
              >GSAP Flip plugin docs</a
            >
          </li>
          <li>
            <a href="https://codepen.io/collection/AEkJmd">Flip showcase</a>
          </li>
          <li>
            <a href="https://codepen.io/collection/nqvwmG">Flip how-to demos</a>
          </li>
          <li>
            <a href="https://web.dev/prefers-reduced-motion/"
              >prefers-reduced-motion: Sometimes less movement is more</a
            >
          </li>
        </ul>
        <p><a href="/blog/">Back to all blog posts</a></p>
      </main>
    </article>
  </body>
</html>
